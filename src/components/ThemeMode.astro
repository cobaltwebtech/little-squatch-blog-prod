<!-- Script to handle dark mode. It will check if the theme is stored in localStorage or if dark theme is preferred by system settings -->
<script is:inline>
  function setThemeFromLocalStorage() {
    if (
      localStorage.getItem("hs_theme") === "dark" ||
      (!("hs_theme" in localStorage) &&
        window.matchMedia("(prefers-color-scheme: dark)").matches)
    ) {
      document.documentElement.classList.add("dark");
    } else {
      document.documentElement.classList.remove("dark");
    }
  }
  setThemeFromLocalStorage();
  document.addEventListener("astro:after-swap", () => {
    setThemeFromLocalStorage();
  });
</script>
